{"version":3,"sources":["app/components/Header.js","app/components/ButtonBar.js","app/components/ChartFilters.js","app/services/config.js","app/util/constants.js","app/services/streams.js","app/hooks/useInterval.js","app/components/LineChart.js","app/components/tables/FleetStatusTable.js","app/components/tables/InsightsTable.js","app/services/util.js","app/components/tables/AlertFilters.js","app/components/tables/AlertsTable.js","app/services/restql.js","app/components/tables/ModalTable.js","app/components/ModalComponent.js","app/components/Dashboard.js","App.js","reportWebVitals.js","index.js"],"names":["useStyles","makeStyles","header","fontWeight","aboutButton","top","right","position","backgroundColor","boxShadow","border","intializeButton","Header","handleOnIntialize","isIntializeButtonDisabled","classes","Grid","container","direction","justify","alignItems","Typography","variant","align","className","Button","onClick","CircularProgress","size","window","open","root","display","justifyContent","marginTop","actionButton","marginRight","width","ButtonBar","handleOnStart","handleOnStop","isLoading","isStartButtonDisabled","isStopButtonDisabled","isStreamStarted","disabled","ChartFilters","setChartFilter","useState","selected","setSelected","useEffect","ToggleButtonGroup","value","exclusive","onChange","e","aria-label","style","margin","ToggleButton","config","gdnURL","apiKey","MAINTENANCE_CENTER","PLANNED_MAINTENANCE","TELEMATICS","GET_TELEMATICS_30_DAYS","GET_TOP5_MAINTENANCE_CENTERS_FOR_CITY","GET_ASSET_DETAILS","GET_FLEET_STATS_CHART_DATA","ENRICHTED_TELEMATICS","LOAD_DATASETS","TRUNCATE_DATASETS","STREAM_WORKERS","jsc8Client","jsC8","url","getDataset1","R","getDataset2","maintenanceCenterList","a","city","executeRestql","City","result","console","error","telematicList","assetDetails","Asset","processBooking","payload","insightList","data","fleetStats","fleetChartData","filter","tdata","week","year","month","all","forEach","item","sort","stat_1","stat_2","moment","Month","valueOf","startStopStream","start","steamsArr","reverse","streamPromises","element","push","activateStreamApp","Promise","message","createStreamReader","streamName","filters","Math","round","random","replace","response","useInterval","callback","delay","savedCallback","useRef","current","id","setInterval","clearInterval","flexDirection","securitiesSelect","selectGrid","paddingBottom","selectLabel","paddingRight","fontSize","chartCanvas","height","heading","LineChart","canvasRef","chartFilter","chartData","setChartData","initFleetChartData","ch","initChart","destroy","Chart","type","options","maintainAspectRatio","plugins","legend","elements","point","radius","scales","x","grid","y","labels","label","datasets","dataset1","borderColor","borderWidth","dataset2","ref","tableCell","padding","FleetStatusTable","setData","initFleetStats","Attention_Required","Critical_Status","Fleet_Health","Unplanned_Maintenance","Planned_Maintenance","TableContainer","component","Paper","Table","table","TableBody","Object","keys","map","key","i","TableRow","TableCell","arrow","color","Vehicle_With_Most_Frequent_Issues","Most_Common_Alert","Total_Cost_Of_Unplanned_Maintenance","Area_With_Most_Alerts","Least_Cost_Effective_Vehicle","InsightsTable","initInsightList","marginBottom","hasOwnProperty","activeButtonClass","borderRadius","formatDate","date","b","from","printDate","format","getRand","floor","theme","activeActionButton","flex","AlertFilters","stats","setAlterFilter","critical","attention","booked","unbooked","computeClass","val","minWidth","paddingTop","pagination","AlertsTable","alertsData","setOpenModal","alertStats","setAlertStats","alertFilter","fdata","setFData","odata","setOData","setTData","React","page","setPage","tempData","arr","j","temparr","chunk","length","slice","slicer","toLowerCase","Maintenance_Planned","Status_Level","TableHead","row","background","Fault","Timestamp","Booked_In","status","Pagination","count","showFirstButton","showLastButton","event","intialize","onReady","truncateCollections","loadDataCollections","promises","collection","truncate","tpromises","isDemoReady","demo","ready","ModalTable","handleSelect","alertData","selectedCenter","setSelectedCenter","focus","setFocus","initMaintenanceCenterList","results","document","querySelector","visibility","minDate","Date","r","maintenaceData","Name","Rating","Estimated_Time","Estimated_Cost","setOpen","toggle","closeImg","cursor","float","memo","props","openModal","closeModal","modalData","setModalData","handleClose","handleSelectDate","_key","Fragment","Dialog","fullWidth","maxWidth","onClose","aria-labelledby","DialogTitle","DialogContent","DialogContentText","section","Dashboard","setIsStreamStarted","setIsLoading","isStopLoading","setIsStopLoading","isIntializeLoading","setIsIntializeLoading","setIsStartButtonDisabled","streamConnections","setStreamConnections","setAlertsData","preventDefault","returnValue","addEventListener","removeEventListener","initDemoReady","isReady","initAssetDetails","asetDetail","Driver","Vehicle_Model","Work_Cost","tdate","toISOString","Invoice_Number","Cost_Center","Work_Description","closeStreamAndWebSocket","initTelematicList","Map","values","terminate","startStreamAndWebSocket","establishConnectionForFree","alertsStreamConnection","prev","_consumer","on","info","send","JSON","stringify","messageId","parse","messageManipulation","tempArr","msg","encodedMessage","decodedMessage","atob","newData","parseMessage","Container","xs","handleBooking","createMuiTheme","typography","fontFamily","overrides","MuiTableCell","stickyHeader","head","MuiTypography","MuiButton","textTransform","MuiFormControl","MuiInputLabel","outlined","transform","MuiOutlinedInput","input","MuiPaginationItem","MuiToggleButton","MuiTableHead","MuiTableContainer","overflowX","App","ThemeProvider","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.ca8c8c38.chunk.js","sourcesContent":["import {\n  Button,\n  Grid,\n  makeStyles,\n  CircularProgress,\n  Typography,\n} from \"@material-ui/core\";\nimport React from \"react\";\n\nconst useStyles = makeStyles({\n  header: {\n    fontWeight: \"500 !important\",\n  },\n  aboutButton: {\n    top: \"1.1rem\",\n    right: \"2rem\",\n    position: \"absolute\",\n    backgroundColor: \"rgb(208 225 243)\",\n    boxShadow: \"none\",\n    border: \"1px solid rgb(169,169,169)\",\n  },\n  intializeButton: {\n    top: \"1.1rem\",\n    right: \"8rem\",\n    position: \"absolute\",\n    backgroundColor: \"rgb(208 225 243)\",\n    boxShadow: \"none\",\n    border: \"1px solid rgb(169,169,169)\",\n  },\n});\n\nconst Header = ({ handleOnIntialize, isIntializeButtonDisabled }) => {\n  const classes = useStyles();\n\n  return (\n    <>\n      <Grid container direction=\"column\" justify=\"center\" alignItems=\"stretch\">\n        <Typography variant=\"h4\" align=\"center\" className={classes.header}>\n          Macrometa - Realtime Fleet Management\n        </Typography>\n        <Typography variant=\"subtitle1\" align=\"center\" className={classes.header}>\n                    Simple, secure and scalable realtime fleet management.\n          </Typography>\n      </Grid>\n      <Button\n        variant=\"contained\"\n        className={classes.intializeButton}\n        onClick={() => {\n          handleOnIntialize();\n        }}\n      >\n        {isIntializeButtonDisabled ? (\n          <CircularProgress size={24} />\n        ) : (\n          \"Intialize\"\n        )}\n      </Button>\n      <Button\n        variant=\"contained\"\n        className={classes.aboutButton}\n        onClick={() => {\n          window.open(\n            \"https://github.com/Macrometacorp/demo-fleet-management\",\n            \"_blank\"\n          );\n        }}\n      >\n        About\n      </Button>\n    </>\n  );\n};\n\nexport default Header;\n","import { Button, CircularProgress, makeStyles } from \"@material-ui/core\";\nimport React from \"react\";\n\nconst useStyles = makeStyles({\n  root: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    marginTop: \"1rem\",\n  },\n  actionButton: {\n    marginRight: \"3rem\",\n    backgroundColor: \"rgb(208 225 243)\",\n    width: \"9rem\",\n    boxShadow: \"none\",\n    border: \"1px solid rgb(169,169,169)\",\n  },\n});\n\nconst ButtonBar = ({\n  handleOnStart,\n  handleOnStop,\n  isLoading,\n  isStartButtonDisabled,\n  isStopButtonDisabled,\n  isStreamStarted,\n}) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <Button\n        variant=\"contained\"\n        className={classes.actionButton}\n        onClick={handleOnStart}\n        disabled={(isStartButtonDisabled && !isStopButtonDisabled) || isStreamStarted}\n      >\n        {isLoading ? <CircularProgress size={24} /> : \"Start\"}\n      </Button>\n      <Button\n        variant=\"contained\"\n        className={classes.actionButton}\n        onClick={handleOnStop}\n        disabled={(!isStartButtonDisabled && isStopButtonDisabled) || !isStreamStarted}\n      >\n        {isStopButtonDisabled ? <CircularProgress size={24} /> : \"Stop\"}\n      </Button>\n    </div>\n  );\n};\n\nexport default ButtonBar;\n","import React, { useState, useEffect } from \"react\";\nimport { ToggleButton, ToggleButtonGroup } from \"@material-ui/lab\";\nimport { makeStyles } from \"@material-ui/core\";\n\nconst useStyles = makeStyles({\n  actionButton: {\n    backgroundColor: \"#fff\",\n    width: \"9rem\",\n    boxShadow: \"none\",\n    border: \"1px solid rgb(169,169,169)\",\n  },\n});\n\nexport default function ChartFilters({ setChartFilter }) {\n  const [selected, setSelected] = useState(\"week\");\n  const classes = useStyles();\n\n  useEffect(() => {\n    setChartFilter(selected);\n  }, [selected]);\n\n  return (\n    <ToggleButtonGroup\n      value={selected}\n      exclusive\n      onChange={(e, value) => setSelected(value)}\n      aria-label=\"text alignment\"\n      style={{ margin: \"15px 0px\" }}\n    >\n      <ToggleButton value=\"week\" className={classes.actionButton}>\n        Week\n      </ToggleButton>\n      <ToggleButton value=\"month\" className={classes.actionButton}>\n        Month\n      </ToggleButton>\n      <ToggleButton value=\"year\" className={classes.actionButton}>\n        Year\n      </ToggleButton>\n      {/* <ToggleButton value=\"all\" className={classes.actionButton}>\n        All\n      </ToggleButton> */}\n    </ToggleButtonGroup>\n  );\n}\n","const config = {\n    gdnURL: \"https://gdn.paas.macrometa.io\",\n    apiKey:\n    \"demo-fleet1-management_macrometa.io.hitachi_fleet_management.WKx25TjCkOQG4Obx6Utc2QzqPD5wZt96IQD7G1qsQFcAqn3Od1DUMWuWNOgKp0Pq174fcb\",\n};\n\nexport default config;\n","const MAINTENANCE_CENTER = \"maintenance_centers\"\nconst UNPLANNED_MAINTENANCE = \"unplanned_maintenance\"\nconst PLANNED_MAINTENANCE = \"planned_maintenance\"\nconst TELEMATICS = \"telematics\"\nconst ISSUE_COUNTS = \"issue_counts\"\nconst AREA_ISSUE_COUNTS = \"area_issue_counts\"\nconst FLEET_STATS = \"fleet_stats\"\nconst VEHICLE_ISSSUE_COUNTS = \"vehicle_issue_counts\"\n\nconst LOAD_MAINTENANCE_CENTER = \"load_maintenance_centers\"\nconst LOAD_PLANNED_MAINTENANCE = \"load_planned_maintenance\"\nconst LOAD_TELEMATICS = \"load_telematics\"\nconst LOAD_AREA_ISSIE_COUNTS = \"load_area_issue_counts\"\nconst LOAD_ISSSUE_COUNTS = \"load_issue_counts\"\nconst LOAD_VEHICLE_ISSSUE_COUNTS = \"load_vehicle_issue_counts\"\nconst LOAD_FLEET_STATS_COUNTS = \"load_fleet_stats_counts\"\n\nexport const ON_READY = \"on_ready\"\nexport const IS_DEMO_READY = \"is_demo_ready\"\n\nexport const GET_TELEMATICS_30_DAYS = \"get_telematics_30_days\"\nexport const GET_TOP5_MAINTENANCE_CENTERS_FOR_CITY = \"get_top5_maintenance_centers_for_city\"\nexport const GET_ASSET_DETAILS = \"get_asset_details\"\nexport const GET_TELEMATIC_INSIGHTS = \"get_telematic_insights\"\nexport const GET_FLEET_STATS = \"get_fleet_stats\"\nexport const GET_FLEET_STATS_CHART_DATA = \"get_fleet_stats_chart_data\"\nexport const INSERT_UNPLANNED_MAINTENANCE = \"insert_unplanned_maintenance\"\nexport const ENRICHTED_TELEMATICS =  \"enriched-telematics\"\n\nexport const COLLECTIONS = {\n  MAINTENANCE_CENTER,\n  PLANNED_MAINTENANCE,\n  TELEMATICS,\n};\n\nexport const LOAD_DATASETS = [\n  LOAD_MAINTENANCE_CENTER,\n  LOAD_PLANNED_MAINTENANCE,\n  LOAD_TELEMATICS,\n  LOAD_AREA_ISSIE_COUNTS,\n  LOAD_ISSSUE_COUNTS,\n  LOAD_VEHICLE_ISSSUE_COUNTS,\n  LOAD_FLEET_STATS_COUNTS\n]\n\nexport const TRUNCATE_DATASETS = [\n  MAINTENANCE_CENTER,\n  PLANNED_MAINTENANCE,\n  TELEMATICS,\n  UNPLANNED_MAINTENANCE,\n  ISSUE_COUNTS,\n  AREA_ISSUE_COUNTS,\n  FLEET_STATS,\n  VEHICLE_ISSSUE_COUNTS\n]\n\nexport const RESTQL = {\n  GET_TELEMATICS_30_DAYS,\n  GET_TOP5_MAINTENANCE_CENTERS_FOR_CITY,\n  GET_ASSET_DETAILS\n}\n\nexport const STREAM_WORKERS =  [\n  \"insights-worker\",\n  \"fleet-stats-worker\",\n  \"telematics-worker\",\n  \"telematics-simulator\",\n]\n","import jsC8 from \"jsc8\";\nimport config from \"../services/config\";\nimport * as R from 'ramda';\nimport moment from 'moment';\nimport {\n  GET_TOP5_MAINTENANCE_CENTERS_FOR_CITY,\n  GET_TELEMATICS_30_DAYS,\n  GET_TELEMATIC_INSIGHTS,\n  GET_ASSET_DETAILS,\n  INSERT_UNPLANNED_MAINTENANCE,\n  STREAM_WORKERS,\n  GET_FLEET_STATS,\n  GET_FLEET_STATS_CHART_DATA,\n} from \"../util/constants\";\n\nconst jsc8Client = new jsC8({\n  url: config.gdnURL,\n  apiKey: `${config.apiKey}`,\n});\n\nconst getDataset1 = R.pluck('Critical_Status');\nconst getDataset2 = R.pluck('Attention_Required');\n\n\nexport const maintenanceCenterList = async (city = \"London\") => {\n  try {\n    const { result } = await jsc8Client.executeRestql(\n      GET_TOP5_MAINTENANCE_CENTERS_FOR_CITY,\n      { City: city }\n    );\n    return result;\n  } catch (error) {\n    console.error(error);\n    throw error\n  }\n};\n\nexport const telematicList = async () => {\n  try {\n    const { result } = await jsc8Client.executeRestql(GET_TELEMATICS_30_DAYS);\n    return result;\n  } catch (error) {\n    console.error(error);\n    throw error\n  }\n};\n\nexport const assetDetails = async (Asset) => {\n  try {\n    const { result } = await jsc8Client.executeRestql(GET_ASSET_DETAILS,{Asset});\n    return result;\n  } catch (error) {\n    console.error(error);\n    throw error\n  }\n};\n\nexport const processBooking = async (payload) => {\n  try {\n    const { result } = await jsc8Client.executeRestql(INSERT_UNPLANNED_MAINTENANCE, payload);\n    return result;\n  } catch (error) {\n    console.error(error);\n    throw error\n  }\n};\n\nexport const insightList = async () => {\n  try {\n    const { result } = await jsc8Client.executeRestql(GET_TELEMATIC_INSIGHTS);\n    const [data] = result;\n    return data;\n  } catch (error) {\n    console.error(error);\n    throw error\n  }\n};\n\nexport const fleetStats = async () => {\n  try {\n    const { result } = await jsc8Client.executeRestql(GET_FLEET_STATS);\n    const [data] = result;\n    return data;\n  } catch (error) {\n    console.error(error);\n    throw error\n  }\n};\n\nexport const fleetChartData = async (filter = 'week') => {\n  try {\n    const tdata = {\n      week:{},\n      year:{},\n      month:{},\n      all:{}\n    };\n    let { result } = await jsc8Client.executeRestql(GET_FLEET_STATS_CHART_DATA);\n    if(result){\n      result = result.forEach(item=>{\n        if(item && item['last_week']) {\n          tdata['week']['dataset1'] = getDataset1(item['last_week']);\n          tdata['week']['dataset2'] = getDataset2(item['last_week']);\n          tdata['week']['label'] = R.pluck('Date')(item['last_week']);\n        }\n        if(item && item['last_month']) {\n          item['last_month'].sort((stat_1,stat_2)=> moment(stat_1.Month, \"MMM-YYYY\").valueOf() - moment(stat_2.Month, \"MMM-YYYY\").valueOf())\n          tdata['month']['dataset1'] = getDataset1(item['last_month']);\n          tdata['month']['dataset2'] = getDataset2(item['last_month']);\n          tdata['month']['label'] = R.pluck('Month')(item['last_month']);\n        }\n        if(item && item['last_year']) {\n          tdata['year']['dataset1'] = getDataset1(item['last_year']);\n          tdata['year']['dataset2'] = getDataset2(item['last_year']);\n          tdata['year']['label'] = R.pluck('Year')(item['last_year']);\n        }\n        // if(item && item['all']) {\n        //   tdata['all']['dataset1'] = getDataset1([item['all']]);\n        //   tdata['all']['dataset2'] = getDataset2([item['all']]);\n        // }\n      })\n    }\n    return tdata[filter]\n  } catch (error) {\n    console.error(error);\n    throw error\n  }\n};\n\n\nexport const startStopStream = async (start = false) => {\n  try {\n    let steamsArr = STREAM_WORKERS;\n    if (start === false) {\n      steamsArr.reverse();\n    }\n    const streamPromises = [];\n    steamsArr.forEach((element) => {\n      streamPromises.push(jsc8Client.activateStreamApp(element, start));\n    });\n    await Promise.all(streamPromises);\n    return true;\n  } catch (error) {\n    console.error(\"Failed start ot stop strams\", error.message);\n    return false;\n  }\n};\n\nexport const createStreamReader = async (streamName, filters) => {\n  let response;\n  try {\n      response = await jsc8Client.createStreamReader(\n          streamName,\n          `${streamName}-${Math.round(Math.random() * 1000)}`,\n          false,\n          false,\n          config.gdnURL.replace(\"https://\", \"\"),\n          { filters }\n      );\n  } catch (error) {\n      console.error(error);\n  }\n  return response;\n};\n","import { useEffect, useRef } from \"react\";\n\nconst useInterval = (callback, delay) => {\n    const savedCallback = useRef();\n\n    useEffect(() => {\n        savedCallback.current = callback;\n    }, [callback]);\n\n    useEffect(() => {\n        const tick = () => {\n            savedCallback.current();\n        };\n\n        if (delay !== null) {\n            let id = setInterval(tick, delay);\n            return () => clearInterval(id);\n        }\n    }, [delay]);\n};\n\nexport default useInterval;","import Chart from \"chart.js/auto\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { Grid, makeStyles } from \"@material-ui/core\";\nimport LocalShippingIcon from \"@material-ui/icons/LocalShipping\";\nimport ChartFilters from \"./ChartFilters\";\nimport { fleetChartData } from \"../services/streams\";\nimport useInterval from \"../hooks/useInterval\";\n\n// LineChart\n\nconst useStyles = makeStyles({\n  root: {\n    flexDirection: \"column\",\n    display: \"flex\",\n  },\n  securitiesSelect: {\n    width: \"12rem\",\n  },\n  selectGrid: {\n    paddingBottom: \"1rem\",\n  },\n  selectLabel: {\n    paddingRight: \"1rem\",\n    fontSize: \"1.5rem\",\n  },\n  chartCanvas: {\n    height: \"19.5rem\",\n  },\n  heading: {\n    margin: \"10px\",\n    fontSize: \"28px\",\n    fontWeight: 400,\n  },\n});\n\nconst LineChart = () => {\n  const canvasRef = useRef(null);\n  const classes = useStyles();\n  const [chartFilter, setChartFilter] = useState(\"week\");\n  const [chartData, setChartData] = useState({});\n\n  const initFleetChartData = async(filter) => {\n    const result = await fleetChartData(filter);\n    setChartData(result);\n  }\n\n  useEffect(() => {\n    initFleetChartData(chartFilter)\n  }, [chartFilter]);\n\n  useInterval(()=>{\n    initFleetChartData(chartFilter);\n  }, 10000);\n\n  useEffect(() => {\n    const ch = initChart(chartData);\n    return () => {\n      ch.destroy();\n    };\n  }, [canvasRef.current, chartData]);\n\n  const initChart = (data) => {\n    const myChart = new Chart(canvasRef.current, {\n      type: \"line\",\n      options: {\n        maintainAspectRatio: false,\n        plugins: {\n          legend: {\n            display: false,\n          },\n        },\n        elements: {\n          point: {\n            radius: 1,\n          },\n        },\n        scales: {\n          x: {\n              grid: {\n                  display: false,\n              },\n              // ticks: {\n              //     autoSkip: false,\n              // },\n          },\n          y: {\n              grid: {\n                  display: false,\n              },\n              // ticks: {\n              //     autoSkip: false,\n              // },\n          },\n      },\n      },\n      data: {\n        labels: data.label,\n        datasets: [\n          {\n            label: \" Critical\",\n            data: data.dataset1,\n            borderColor: \"red\",\n            borderWidth: 2,\n          },\n          {\n            label: \" Attention\",\n            data: data.dataset2,\n            borderColor: \"#d8d800\",\n            borderWidth: 2,\n          },\n        ],\n      },\n    });\n    return myChart;\n  };\n\n  return (\n    <>\n      <div className={classes.root}>\n        <Grid container alignItems=\"center\">\n          <Grid item>\n            <div style={{ display: \"flex\" }}>\n              <LocalShippingIcon style={{ fontSize: 50 }} />\n              <h3 className={classes.heading}> Fleet Status</h3>\n            </div>\n          </Grid>\n        </Grid>\n        <div className={classes.chartCanvas}>\n          <canvas ref={canvasRef} />\n        </div>\n        <ChartFilters setChartFilter={setChartFilter} />\n      </div>\n    </>\n  );\n};\n\nexport default LineChart;\n","import React, { useState, useEffect } from \"react\";\nimport {\n  makeStyles,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableRow,\n  Paper,\n} from \"@material-ui/core\";\nimport ArrowDropUpIcon from \"@material-ui/icons/ArrowDropUp\";\nimport ArrowDropDownIcon from \"@material-ui/icons/ArrowDropDown\";\nimport { fleetStats } from \"../../services/streams\";\nimport useInterval from \"../../hooks/useInterval\";\n\nconst useStyles = makeStyles({\n  tableCell: {\n    padding: \"1.9px 10px\",\n    border: \"1px solid\",\n  },\n});\n\nexport default function FleetStatusTable() {\n  const classes = useStyles();\n  const [data, setData] = useState({});\n  const initFleetStats = async () => {\n    try {\n      const result = await fleetStats();\n      setData(result);\n    } catch (error) {\n      console.error(\"falied to load the insigths\", error.message);\n    }\n  };\n  useEffect(() => {\n    initFleetStats();\n  }, []);\n\n  useInterval(initFleetStats, 3000);\n\n  const tdata = {\n    Attention_Required: (\n      <>\n        Attention required <br /> (Last 7 days)\n      </>\n    ),\n    Critical_Status: (\n      <>\n        Critical Status <br /> (Last 7 days)\n      </>\n    ),\n    Fleet_Health: (\n      <>\n        Fleet Health <br /> (Last 7 days)\n      </>\n    ),\n    Unplanned_Maintenance: (\n      <>\n        Unplanned Maintenance <br /> (Last 7 days)\n      </>\n    ),\n    Planned_Maintenance: (\n      <>\n        Planned Maintenance <br /> (Next 7 days)\n      </>\n    ),\n  };\n\n  return (\n    <TableContainer component={Paper}>\n      <Table className={classes.table} aria-label=\"custom pagination table\">\n        <TableBody>\n          {Object.keys(tdata) &&\n            Object.keys(tdata).map((key, i) => (\n              <TableRow key={Math.random()}>\n                <TableCell className={classes.tableCell}>\n                  {tdata[key]}\n                </TableCell>\n                <TableCell\n                  className={classes.tableCell}\n                  style={{ width: \"50px\" }}\n                >\n                  {data && data[key] && data[key].arrow === \"Up\" ? (\n                    <ArrowDropUpIcon style={{ fontSize: 50 }} />\n                  ) : (\n                    <ArrowDropDownIcon style={{ fontSize: 50 }} />\n                  )}\n                </TableCell>\n                <TableCell className={classes.tableCell}>  \n                  <b\n                    style={{\n                      color: `${\n                        data && data[key] && data[key].arrow === \"Up\"\n                          ? \"green\"\n                          : \"red\"\n                      }`,\n                    }}\n                  >\n                    {data && data[key] && data[key][key]}\n                  </b>\n                </TableCell>\n              </TableRow>\n            ))}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport {\n  makeStyles,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableRow,\n  Paper,\n} from \"@material-ui/core\";\nimport { insightList } from \"../../services/streams\";\nimport useInterval from \"../../hooks/useInterval\";\n\nconst useStyles = makeStyles({\n  tableCell: {\n    padding: \"0.7rem\",\n    border: \"1px solid\",\n  },\n  heading: {\n    margin: \"10px\",\n    fontSize: \"28px\",\n    fontWeight: 400,\n  },\n});\n\nconst tdata = {\n  Vehicle_With_Most_Frequent_Issues: \"Vechicle with most frequent issue\",\n  Most_Common_Alert: \"Most Common Alert\",\n  Total_Cost_Of_Unplanned_Maintenance: \"Total Cost of Unplanned Maintenance\",\n  Area_With_Most_Alerts: \"Area with most Alerts\",\n  Least_Cost_Effective_Vehicle: \"Least Cost Effective Vehicle\",\n};\n\nexport default function InsightsTable() {\n  const classes = useStyles();\n  const [data, setData] = useState({});\n  const initInsightList = async () => {\n    try {      \n      const result = await insightList();\n      setData(result);\n    } catch (error) {\n      console.error('falied to load the insigths', error.message);\n    }\n  };\n  useEffect(() => {\n    initInsightList();\n  }, []);\n  useInterval(initInsightList, 3000);\n  return (\n    <>\n      <div style={{ display: \"flex\", marginBottom: \"10px\" }}>\n        <span\n          className=\"fab fa-searchengin\"\n          style={{ fontSize: 40, marginTop: \"10px\" }}\n        ></span>\n        <h3 className={classes.heading}> Insights</h3>\n      </div>\n      <TableContainer component={Paper}>\n        <Table className={classes.table} aria-label=\"custom pagination table\">\n          <TableBody>\n            {Object.keys(tdata) &&\n              Object.keys(tdata).map((key) => (\n                <TableRow key={Math.random()}>\n                  <TableCell className={classes.tableCell}>\n                    {tdata[key]}\n                  </TableCell>\n                  <TableCell className={classes.tableCell}>\n                    {data && data.hasOwnProperty(key) ? data[key] : \"-\"}\n                  </TableCell>\n                  <TableCell className={classes.tableCell}>\n                    investigate\n                  </TableCell>\n                </TableRow>\n              ))}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </>\n  );\n}\n","import moment from \"moment\";\n\nexport const activeButtonClass = {\n  backgroundColor: \"#4b81c3\",\n  width: \"9rem\",\n  boxShadow: \"none\",\n  border: \"1px solid rgb(169,169,169)\",\n  color: \"#ffffff\",\n  borderRadius: 0,\n  \"&:hover\": {\n    backgroundColor: \"#4b81c3\",\n    color: \"#ffffff\",\n  },\n};\n\nexport const slicer = (arr, size) => {\n  var i,\n    j,\n    temparr = [],\n    chunk = size;\n  for (i = 0, j = arr.length; i < j; i += chunk) {\n    temparr.push(arr.slice(i, i + chunk));\n  }\n  return temparr;\n};\n\nexport const formatDate = (date) => {\n  var a = moment(date);\n  var b = moment();\n  return a.from(b); // \"a day ago\"\n};\n\nexport const printDate = (date) => {\n  if (date) return moment(date).format(\"D MMM YYYY\");\n  return;\n};\n\nexport const getRand = () => Math.floor(1000000 + Math.random() * 900000);\n\nexport const parseMessage = (msg) => {\n  const encodedMessage = JSON.parse(msg).payload;\n  const messageId = JSON.parse(msg).messageId;\n  const decodedMessage = atob(encodedMessage);\n\n  if (decodedMessage.length === 0) {\n    return { newData: {}, messageId };\n  }\n  const newData = JSON.parse(decodedMessage);\n  return { newData, messageId };\n};\n","import React, { useState, useEffect } from \"react\";\nimport { makeStyles, Button } from \"@material-ui/core\";\nimport { activeButtonClass } from \"../../services/util\";\n\nconst useStyles = makeStyles((theme) => ({\n  actionButton: {\n    backgroundColor: \"#ffffff\",\n    width: \"9rem\",\n    boxShadow: \"none\",\n    border: \"1px solid rgb(169,169,169)\",\n    borderRadius: 0\n  },\n  activeActionButton: activeButtonClass,\n  root: {\n    display: 'flex',\n    \"& > *\": {\n      marginRight: '10px', //theme.spacing(2),\n      marginTop: \"0.6rem\",\n      flex: 1,\n      padding: '5px 0px'\n    },\n  },\n}));\n\nexport default function AlertFilters({stats, setAlterFilter}) {\n  const classes = useStyles();\n  const [selected, setSelected] = useState(\"all\");\n  const { all, critical, attention, booked, unbooked } = stats;\n  const computeClass = (val) =>\n    `${selected === val ? classes.activeActionButton : classes.actionButton}`;\n\n  useEffect(()=>{\n    setAlterFilter(selected);\n  },[selected])\n\n  return (\n    <>\n      <div className={classes.root}>\n        <Button\n          variant=\"outlined\"\n          onClick={() => setSelected(\"all\")}\n          className={computeClass(\"all\")}\n        >\n          All ({all})\n        </Button>\n        <Button\n          variant=\"outlined\"\n          onClick={() => setSelected(\"critical\")}\n          className={computeClass(\"critical\")}\n        >\n          Critical ({critical})\n        </Button>\n        <Button\n          variant=\"outlined\"\n          onClick={() => setSelected(\"attention\")}\n          className={computeClass(\"attention\")}\n        >\n          Attention ({attention})\n        </Button>\n        <Button\n          variant=\"outlined\"\n          onClick={() => setSelected(\"booked\")}\n          className={computeClass(\"booked\")}\n        >\n          Booked ({booked})\n        </Button>\n        <Button\n          variant=\"outlined\"\n          onClick={() => setSelected(\"unbooked\")}\n          className={computeClass(\"unbooked\")}\n        >\n          To be Booked ({unbooked})\n        </Button>\n      </div>\n    </>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport {\n  makeStyles,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableRow,\n  TableHead,\n  Paper,\n  Button,\n} from \"@material-ui/core\";\nimport Pagination from \"@material-ui/lab/Pagination\";\nimport NotificationsActiveIcon from \"@material-ui/icons/NotificationsActive\";\nimport AlertFilters from \"./AlertFilters\";\nimport {\n  activeButtonClass,\n  slicer,\n  formatDate,\n  printDate,\n} from \"../../services/util\";\n\nconst useStyles = makeStyles({\n  table: {\n    minWidth: 650,\n  },\n  root: {\n    paddingTop: \"1rem\",\n  },\n  pagination: {\n    borderRadius: \"none\",\n  },\n  activeActionButton: { ...activeButtonClass, width: \"4rem\" },\n  heading: {\n    margin: \"10px\",\n    fontSize: \"28px\",\n    fontWeight: 400,\n  },\n});\n\nexport default function AlertsTable({ alertsData, setOpenModal }) {\n  const classes = useStyles();\n  const [alertStats, setAlertStats] = useState({\n    all: 0,\n    critical: 0,\n    attention: 0,\n    booked: 0,\n  });\n  const [alertFilter, setAlterFilter] = useState(\"all\");\n  const [fdata, setFData] = useState([]);\n  const [odata, setOData] = useState([]);\n  const [tdata, setTData] = useState([]);\n  const [page, setPage] = React.useState(1);\n  const handleChange = (event, value) => {\n    setPage(value);\n  };\n\n\n  useEffect(() => {\n    let data = odata.filter((item) => {\n      let filter = alertFilter.toLowerCase();\n      if (filter === \"all\") return true;\n      if (filter === \"booked\") {\n        return item.Maintenance_Planned.toLowerCase() === \"yes\";\n      } else if (filter === \"unbooked\") {\n        return item.Maintenance_Planned.toLowerCase() === \"no\";\n      } else {\n        return item.Status_Level.toLowerCase() === filter;\n      }\n    });\n    const tempData = slicer(data, 8);\n    setFData(tempData);\n    setTData(tempData[(page - 1) | 0]);\n    tempData.length < page ? setPage(1) : setPage(page);\n\n  }, [alertFilter, odata]);\n\n  useEffect(() => {\n    setTData(fdata[page - 1]);\n  }, [page]);\n\n  useEffect(() => {\n    setOData(alertsData);\n  }, [alertsData]);\n\n  useEffect(() => {\n    let stats = {\n      all: odata.length,\n      critical: 0,\n      attention: 0,\n      booked: 0,\n      unbooked: 0,\n    };\n    odata.forEach((item) => {\n      if (item.Maintenance_Planned.toLowerCase() === \"yes\") stats.booked += 1;\n      if (item.Maintenance_Planned.toLowerCase() === \"no\") stats.unbooked += 1;\n      if (item.Status_Level.toLowerCase() === \"critical\") stats.critical += 1;\n      if (item.Status_Level.toLowerCase() === \"attention\") stats.attention += 1;\n    });\n    setAlertStats(stats);\n  }, [odata]);\n\n  return (\n    <>\n      <div style={{ display: \"flex\" }}>\n        <NotificationsActiveIcon style={{ fontSize: 50 }} />\n        <h3 className={classes.heading}>Alerts</h3>\n      </div>\n      <AlertFilters stats={alertStats} setAlterFilter={setAlterFilter} />\n      <div className={classes.root}>\n        <TableContainer component={Paper}>\n          <Table className={classes.table} aria-label=\"simple table\">\n            <TableHead>\n              <TableRow>\n                <TableCell style={{ width: \"5rem\" }}>Vechicle ID</TableCell>\n                <TableCell align=\"center\">Alert &nbsp; Description</TableCell>\n                <TableCell align=\"center\">Date &nbsp; Logged</TableCell>\n                <TableCell align=\"center\">Status level</TableCell>\n                <TableCell align=\"center\">Maintenance &nbsp; Planned</TableCell>\n                <TableCell align=\"center\" style={{ width: \"5rem\" }}>\n                  Action\n                </TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {tdata &&\n                tdata.map((row, i) => (\n                  <TableRow\n                    key={Math.random()}\n                    style={i % 2 ? { background: \"rgb(208 225 243)\" } : {}}\n                  >\n                    <TableCell align=\"center\">{row.Asset}</TableCell>\n                    <TableCell align=\"center\">{row.Fault}</TableCell>\n                    <TableCell align=\"center\">\n                      {formatDate(row.Timestamp)}\n                    </TableCell>\n                    <TableCell\n                      align=\"center\"\n                      style={{\n                        color: `${\n                          row.Status_Level === \"Critical\" ? \"red\" : \"\"\n                        }`,\n                      }}\n                    >\n                      {row.Status_Level}\n                    </TableCell>\n                    <TableCell align=\"center\">\n                      {row.Maintenance_Planned}\n                    </TableCell>\n                    <TableCell align=\"center\">\n                      {row.Maintenance_Planned.toLowerCase() === \"yes\" ? (\n                        <>\n                          Booked\n                          <br />\n                          {printDate(row.Booked_In)}\n                        </>\n                      ) : (\n                        <Button\n                          variant=\"contained\"\n                          color=\"primary\"\n                          className={classes.activeActionButton}\n                          style={{ padding: \"0px\" }}\n                          onClick={() =>\n                            setOpenModal({ status: true, data: row })\n                          }\n                        >\n                          Book\n                        </Button>\n                      )}\n                    </TableCell>\n                  </TableRow>\n                ))}\n            </TableBody>\n          </Table>\n          <Pagination\n            className={classes.pagination}\n            count={fdata.length}\n            showFirstButton\n            showLastButton\n            page={page}\n            onChange={handleChange}\n          />\n        </TableContainer>\n      </div>\n    </>\n  );\n}\n","import jsC8 from \"jsc8\";\nimport config from \"../services/config\";\nimport { TRUNCATE_DATASETS, LOAD_DATASETS, ON_READY, IS_DEMO_READY } from \"../util/constants\";\nimport { startStopStream  } from \"./streams\";\n\nconst jsc8Client = new jsC8({\n  url: config.gdnURL,\n  apiKey: `${config.apiKey}`,\n});\n\nexport const intialize = async (callback) => {\n  try {\n    await onReady(false);\n    await startStopStream();\n    await truncateCollections();\n    await loadDataCollections();\n    await onReady(true);\n    callback(false);\n  } catch (error) {\n    console.error(\"Failed to intialize\", error.message);\n    callback(false);\n  }\n};\n\nconst truncateCollections = async () => {\n  try {\n    const promises = TRUNCATE_DATASETS.map((collection) =>\n      jsc8Client.collection(collection).truncate()\n    );\n    await Promise.all(promises);\n  } catch (error) {\n    console.error(\"Failed to truncate\", error.message);\n  }\n};\n\nconst loadDataCollections = async () => {\n  try {\n    const promises = LOAD_DATASETS.slice(0,2).map(\n      (collection) => jsc8Client.executeRestql(collection)\n    );\n    await Promise.all(promises);\n    await jsc8Client.executeRestql(LOAD_DATASETS[2]);\n    const tpromises = LOAD_DATASETS.slice(3).map(\n      (collection) => jsc8Client.executeRestql(collection)\n    );\n    await Promise.all(tpromises);\n  } catch (error) {\n    console.error(\"Failed to load\", error.message);\n  }\n};\n\nexport const onReady = async (status) => {\n  try {\n    await jsc8Client.executeRestql(ON_READY, { status });\n  } catch (error) {\n    console.error(\"Failed to onReady\", error.message);\n  }\n};\n\nexport const isDemoReady = async () => {\n  try {\n    const response = await jsc8Client.executeRestql(IS_DEMO_READY);\n    const { result } = response;\n    const [ demo ] = result;\n    return (demo && demo.ready) || false;\n  } catch (error) {\n    console.error(\"Failed to onReady\", error.message);\n    return false;\n  }\n};\n","import React, { useState, useEffect, useRef } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Paper,\n  Typography,\n  Button\n} from \"@material-ui/core\";\n// import DatePicker from \"../DatePicker\";\nimport { maintenanceCenterList } from '../../services/streams'\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { activeButtonClass } from \"../../services/util\";\n\nconst useStyles = makeStyles({\n  table: {\n    minWidth: 650,\n  },\n  activeActionButton: { ...activeButtonClass, width: \"5rem\" },\n  pagination: {\n    borderRadius: \"none\",\n  },\n});\n\nexport default function ModalTable({handleSelect, alertData}) {\n  const classes = useStyles();\n  // const [selectedDate, ] = useState(\"06/15/2021\");\n  const [selectedCenter, setSelectedCenter] = useState({});\n  const [data, setData] = useState([]);\n  const [focus, setFocus] = useState(false);\n\n  const initMaintenanceCenterList = async(city) => {\n    try {      \n      const results = await maintenanceCenterList(city);\n      setData(results)\n    } catch (error) {\n      console.error('falied to load maintenace centers', error.message)\n    }\n  }\n\n  const component = useRef(null)\n\n  const toggle = (data) => {\n    setSelectedCenter(data);\n    component.current.setOpen(true);\n    setFocus(!focus)\n  }\n\n  const handleChange = (date) => {\n    handleSelect({date, maintenaceData:selectedCenter})\n  }\n\n  useEffect(()=>{\n    const { City } = alertData;\n    initMaintenanceCenterList(City);\n    document.querySelector(\".react-datepicker-wrapper\").style.visibility = \"hidden\";\n    document.querySelector(\".react-datepicker-wrapper\").style.width = \"64px\";\n  },[])\n  \n  return (\n    <>\n      <Typography component={\"div\"} className={classes.root}>\n        <TableContainer component={Paper}>\n          <Table className={classes.table} aria-label=\"simple table\">\n            <TableHead>\n              <TableRow>\n                <TableCell>Maintenance Center</TableCell>\n                <TableCell align=\"center\">Rating</TableCell>\n                <TableCell align=\"center\">City</TableCell>\n                <TableCell align=\"center\">Estimated Time</TableCell>\n                <TableCell align=\"center\">Estimated Cost</TableCell>\n                <TableCell align=\"center\">Select\n                <DatePicker\n                  minDate={new Date()}\n                  ref={(r) => {\n                    component.current = r;\n                  }}\n                  onChange={handleChange}\n                />\n                </TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {data &&\n                data.map((row, i) => (\n                  <TableRow\n                    key={Math.random()}\n                    style={i % 2 ? { background: \"rgb(208 225 243)\" } : {}}\n                  >\n                    <TableCell align=\"center\">\n                      {row.Name}\n                    </TableCell>\n                    <TableCell align=\"center\">{row.Rating}/5.0</TableCell>\n                    <TableCell align=\"center\">{row.City}</TableCell>\n                    <TableCell align=\"center\">{row.Estimated_Time}  {row.Estimated_Time === 1? 'Day': 'Days'}</TableCell>\n                    <TableCell align=\"center\">${row.Estimated_Cost}</TableCell>\n                    <TableCell align=\"center\">\n                      {/* <DatePicker\n                        key={Math.random()}\n                        onDateChange={(date) => {\n                          handleSelect({date, maintenaceData:row})\n                        }}\n                        initialDate={selectedDate}\n                      /> */} \n                      <Button\n                       variant=\"contained\"\n                       color=\"primary\"\n                       style={{padding:'0px'}}\n                       className={classes.activeActionButton} \n                      onClick={() => toggle(row)}>Select</Button>\n                    </TableCell>\n                  </TableRow>\n                ))}\n            </TableBody>\n          </Table>\n        </TableContainer>\n        \n      </Typography>\n    </>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from \"@material-ui/core\";\nimport ModalTable from \"./tables/ModalTable\";\nimport CancelPresentationIcon from \"@material-ui/icons/CancelPresentation\";\n\nlet closeImg = {\n  cursor: \"pointer\",\n  float: \"right\",\n  marginTop: \"5px\",\n  width: \"50px\",\n};\n\nexport default React.memo(function ModalComponent(props) {\n  const { openModal, closeModal, handleSelect } = props;\n  const [open, setOpen] = React.useState(false);\n  const [modalData, setModalData] = useState({\n    status: false,\n    data: {},\n  });\n\n  useEffect(() => {\n    setOpen(openModal.status);\n    setModalData(openModal.data);\n  }, [openModal.status]);\n\n  const handleClose = () => {\n    setOpen(false);\n    closeModal();\n  };\n\n  const handleSelectDate = (data) => {\n    setOpen(false);\n    closeModal();\n    handleSelect({ ...data, _key: modalData._key, data: modalData });\n  };\n  const { Asset } = modalData;\n\n  return (\n    <React.Fragment>\n      <Dialog\n        fullWidth={true}\n        maxWidth=\"md\"\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"max-width-dialog-title\"\n      >\n        <DialogTitle id=\"max-width-dialog-title\">\n          {Asset}\n          <CancelPresentationIcon\n            fontSize=\"large\"\n            onClick={handleClose}\n            style={closeImg}\n          />\n        </DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            <ModalTable alertData={modalData} handleSelect={(data) => handleSelectDate(data)} />\n          </DialogContentText>\n        </DialogContent>\n      </Dialog>\n    </React.Fragment>\n  );\n})\n","import React, { useState, useEffect } from \"react\";\nimport { Container, makeStyles, Grid } from \"@material-ui/core\";\nimport Header from \"./Header\";\nimport ButtonBar from \"./ButtonBar\";\nimport LineChart from \"./LineChart\";\nimport FleetStatusTable from \"./tables/FleetStatusTable\";\nimport InsightsTable from \"./tables/InsightsTable\";\nimport AlertsTable from \"./tables/AlertsTable\";\nimport { intialize, isDemoReady } from \"../services/restql\";\nimport {\n  startStopStream,\n  createStreamReader,\n  telematicList,\n  assetDetails,\n  processBooking,\n} from \"../services/streams\";\nimport { parseMessage, getRand } from \"../services/util\";\nimport { ENRICHTED_TELEMATICS } from \"../util/constants\";\nimport ModalComponent from \"./ModalComponent\";\n\nconst useStyles = makeStyles({\n  root: {\n    padding: \"0.5rem\",\n  },\n  section: {\n    paddingRight: \"2rem\",\n  },\n  aboutButton: {\n    top: \"1.1rem\",\n    right: \"2rem\",\n    position: \"absolute\",\n    backgroundColor: \"rgb(208 225 243)\",\n    boxShadow: \"none\",\n    border: \"1px solid rgb(169,169,169)\",\n  },\n});\n\nconst Dashboard = () => {\n  const classes = useStyles();\n  const [isStreamStarted, setIsStreamStarted] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isStopLoading, setIsStopLoading] = useState(false);\n  const [isIntializeLoading, setIsIntializeLoading] = useState(false);\n  const [isStartButtonDisabled, setIsStartButtonDisabled] = useState(true);\n  const [streamConnections, setStreamConnections] = useState([]);\n  const [alertsData, setAlertsData] = useState([]);\n  const [openModal, setOpenModal] = useState({ status: false, data: {} });\n\n  const handleClose = (event) => {\n    event.preventDefault();\n    handleOnStop();\n    // This is opening alert message\n    event.returnValue = \"\";\n    return \"\";\n  };\n\n  useEffect(() => {\n    window.addEventListener(\"beforeunload\", handleClose);\n    return () => {\n      window.removeEventListener(\"beforeunload\", handleClose);\n    };\n  }, []);\n  \n  const initDemoReady = async () => {\n    const isReady = await isDemoReady();\n    if (!isReady) setAlertsData([]);\n    setIsStartButtonDisabled(!isReady);\n  };\n\n  const handleBooking = (data) => {\n    let tdata = alertsData.map((item) => {\n      if (item._key === data._key) {\n        item.Maintenance_Planned = \"Yes\";\n        const date = new Date(data.date);\n        item.Booked_In = date.toISOString();\n      }\n      return item;\n    });\n    setAlertsData(tdata);\n    initAssetDetails(data);\n  };\n\n  const initAssetDetails = async (data) => {\n    try {\n      const { Asset, Fault } = data.data;\n      const { date, maintenaceData } = data;\n      const [asetDetail] = await assetDetails(Asset);\n      const { Driver, Vehicle_Model } = asetDetail;\n      const { Estimated_Cost: Work_Cost } = maintenaceData;\n      const tdate = new Date(date);\n      const payload = {\n        Asset,\n        Booked_In: tdate.toISOString(),\n        Invoice_Number: getRand(),\n        Cost_Center: getRand(),\n        Vehicle_Model,\n        Driver,\n        Work_Description: Fault,\n        Work_Cost,\n      };\n      await processBooking(payload);\n    } catch (error) {\n      console.error(\"Failed to book maintenance\", error.message);\n    }\n  };\n\n  useEffect(() => {\n    initDemoReady();\n  }, [isLoading, isStopLoading, isIntializeLoading]);\n\n  //button callback for all the rest\n  const handleOnStart = () => {\n    setIsLoading(true);\n    startStreamAndWebSocket();\n  };\n  const handleOnStop = () => {\n    setIsStopLoading(true);\n    closeStreamAndWebSocket();\n  };\n  const handleOnIntialize = async () => {\n    setIsIntializeLoading(true);\n    await intialize(setIsIntializeLoading);\n  };\n\n  const initTelematicList = async () => {\n    try {\n      const results = await telematicList();\n      let data = [...results];\n      data = data\n        .filter((item) => item)\n        .filter((item) => Object.keys(item).length > 0);\n      data = [...new Map(data.map((item) => [item._key, item])).values()];\n      setAlertsData(data);\n    } catch (error) {\n      console.error(\"falied to load maintenace centers\", error.message);\n    }\n  };\n\n  useEffect(() => {\n    if (!isIntializeLoading) {\n      initTelematicList();\n    }\n  }, [isIntializeLoading]);\n\n  // useEffect(() => {\n  //   setInterval(() => {\n  //     initTelematicList();\n  //   }, 5000);\n  // }, []);\n\n  const closeStreamAndWebSocket = async () => {\n    try {\n      for (const elements of streamConnections) {\n        await elements.terminate();\n      }\n      const response = await startStopStream();\n      if (response) {\n        setIsStreamStarted(false);\n      }\n      setIsStopLoading(false);\n    } catch (error) {\n      console.error(\"Failed to close steam and webscoker\", error.message);\n    }\n  };\n\n  const startStreamAndWebSocket = async () => {\n    try {\n      const response = await startStopStream(true);\n      if (response) {\n        const alertsStreamConnection = await establishConnectionForFree(\n          ENRICHTED_TELEMATICS\n        );\n        setStreamConnections((prev) => [\n          ...streamConnections,\n          alertsStreamConnection,\n        ]);\n        setIsStreamStarted(true);\n      }\n      setIsLoading(false);\n    } catch (error) {\n      console.error(\"Failed to close steam and webscoket\", error.message);\n    }\n  };\n\n  const establishConnectionForFree = async (streamName) => {\n    try {\n      const _consumer = await createStreamReader(streamName);\n      _consumer.on(\"open\", () =>\n        console.info(`Connection open for ${streamName}`)\n      );\n      _consumer.on(\"error\", (error) =>\n        console.error(`Connection error for ${streamName}`, error)\n      );\n      _consumer.on(\"close\", () =>\n        console.info(`Connection close for ${streamName}`)\n      );\n\n      _consumer.on(\"message\", (message) => {\n        _consumer.send(\n          JSON.stringify({ messageId: JSON.parse(message).messageId })\n        );\n\n        messageManipulation(message, ENRICHTED_TELEMATICS);\n      });\n      return _consumer;\n    } catch (error) {\n      console.error(\"error\", error);\n    }\n  };\n\n  const messageManipulation = (message, streamName) => {\n    let tempArr = [];\n    const { newData = {} } = parseMessage(message);\n    if (!newData || Object.keys(newData).length === 0) {\n      return;\n    }\n    newData[\"_key\"] = getRand();\n    tempArr.push(newData);\n    setAlertsData((prev) => [...tempArr, ...prev]);\n  };\n\n  return (\n    <>\n      <Container className={classes.root} maxWidth={false}>\n        <Header\n          handleOnIntialize={handleOnIntialize}\n          isIntializeButtonDisabled={isIntializeLoading}\n        />\n        <ButtonBar\n          handleOnStart={handleOnStart}\n          handleOnStop={handleOnStop}\n          isLoading={isLoading}\n          isStartButtonDisabled={isStartButtonDisabled}\n          isStopButtonDisabled={isStopLoading}\n          isStreamStarted={isStreamStarted}\n        />\n        <Grid\n          container\n          direction=\"row\"\n          style={{ paddingTop: \"32px\" }}\n          alignItems=\"flex-start\"\n        >\n          <Grid item xs={6} className={classes.section}>\n            <Grid container direction=\"row\" alignItems=\"flex-start\">\n              <Grid item xs={6} className={classes.section}>\n                <LineChart />\n              </Grid>\n              <Grid\n                item\n                xs={6}\n                className={classes.section}\n                style={{ marginTop: \"4rem\" }}\n              >\n                <FleetStatusTable />\n              </Grid>\n              <Grid item xs={12} className={classes.section}>\n                <InsightsTable />\n              </Grid>\n            </Grid>\n          </Grid>\n          <Grid item xs={6} className={classes.section}>\n            <AlertsTable alertsData={alertsData} setOpenModal={setOpenModal}/>\n          </Grid>\n        </Grid>\n        <ModalComponent\n          openModal={openModal}\n          closeModal={() => setOpenModal({ status: false, data: { id: 0 } })}\n          handleSelect={(data) => handleBooking(data)}\n        />\n      </Container>\n    </>\n  );\n};\n\nexport default Dashboard;\n","import { createMuiTheme, ThemeProvider } from \"@material-ui/core\";\nimport Dashboard from \"./app/components/Dashboard\";\n\nconst theme = createMuiTheme({\n  typography: {\n    fontFamily: \"Lato\",\n  },\n  overrides: {\n    MuiTableCell: {\n      root: {\n        padding: \"0.8rem\",\n      },\n      stickyHeader: {\n        backgroundColor: \"#d0e0f3\",\n      },\n      head: {\n        color: \"#ffffff\",\n        fontWeight: 900,\n      },\n    },\n    MuiTypography: {\n      root: {\n        fontWeight: \"600 !important\",\n      },\n    },\n    MuiButton: {\n      label: {\n        textTransform: \"capitalize\",\n        fontWeight: \"600\",\n      },\n    },\n    MuiFormControl: {\n      root: {\n        height: \"56px\",\n      },\n    },\n    MuiInputLabel: {\n      outlined: {\n        transform: \"translate(14px, 0.7rem) scale(1)\",\n      },\n    },\n    MuiOutlinedInput: {\n      input: {\n        padding: \"0.65rem 14px\",\n      },\n    },\n    MuiPaginationItem: {\n      root: {\n        borderRadius: \"0px\",\n      },\n      page: {\n        padding: \"23px\",\n        \"&$selected\": {\n          backgroundColor: \"#4b81c3\",\n          color: \"#ffffff\",\n          \"&:hover\": {\n            backgroundColor: \"#4b81c3\",\n            color: \"#ffffff\",\n          },\n        },\n        \"&:hover\": {\n          backgroundColor: \"#4b81c3\",\n          color: \"#ffffff\",\n        },\n      },\n    },\n    MuiToggleButton: {\n      root: {\n        \"&$selected\": {\n          backgroundColor: \"#4b81c3\",\n          color: \"#ffffff\",\n          \"&:hover\": {\n            backgroundColor: \"#4b81c3\",\n            color: \"#ffffff\",\n          },\n        },\n        \"&:hover\": {\n          backgroundColor: \"#4b81c3\",\n          color: \"#ffffff\",\n        },\n      },\n    },\n    MuiTableHead: {\n      root: {\n        backgroundColor: \"#4b81c3\",\n      },\n    },\n    MuiTableContainer: {\n      root: {\n        overflowX: \"inherit\",\n      },\n    },\n  },\n});\n\nconst App = () => {\n  return (\n    <>\n      <ThemeProvider theme={theme}>\n        <Dashboard />\n      </ThemeProvider>\n    </>\n  );\n};\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}